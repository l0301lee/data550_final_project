# Lung Cancer Data Analysis Project

## Overview

This project analyzes the "Lung Cancer Data" to identify potential risk factors for lung cancer, visualize data relationships, and build a predictive model to understand lung cancer likelihood in patients. The analysis includes:
- Data loading and preprocessing
- Descriptive statistics and tables
- Visualizations
- Logistic regression modeling

## Directory Structure

- `code/`: Contains scripts for each step of the analysis.
    - `01_data_preprocessing.R`: Loads and preprocesses the data, saving a cleaned dataset in the `output/` folder.
    - `02_descriptive_analysis.R`: Generates descriptive statistics (Table 1) and saves the table as an HTML file in `output/`.
    - `03_plot_age_distribution.R`: Creates a plot of age distribution by lung cancer status and saves it as a PNG file in `output/`.
    - `04_predictive_modeling.R`: Fits a logistic regression model and saves the results as an HTML file in `output/`.
- `data/`: Contains the lung cancer dataset (`lung_cancer_data.csv`). If privacy is a concern, use a synthetic or subset dataset.
- `output/`: Contains generated outputs:
    - `lung_data_clean.rds`: Cleaned version of the dataset.
    - `table1.html`: Descriptive statistics table.
    - `age_distribution.png`: Age distribution plot.
    - `model_summary.html`: Logistic regression results table.
- `report/`: Contains the `final_report.Rmd` file for generating the final report.

## Requirements

- **R** and the following R packages:
  - `dplyr`, `ggplot2`, `knitr`, `kableExtra`, `tableone`, `broom`, `here`, and `htmltools`.

To install these packages in R, run:

```r
install.packages(c("dplyr", "ggplot2", "knitr", "kableExtra", "tableone", "broom", "here", "htmltools"))
```

## How to Generate the Report

1. **Clone the Repository**
   ```bash
   git clone https://github.com/l0301lee/lung-cancer-analysis
   cd lung-cancer-analysis
   ```

2. **Install Dependencies**
   Ensure you have R installed and the required packages, as outlined above.

3. **Generate the Report with `make`**
   Run the following command in your terminal to build the report:
   ```bash
   make
   ```

   The `make` command will:
   - Execute each script in `code/` to generate the necessary output files in `output/`.
   - Render the final report (`final_report.html`) by reading these saved outputs.

4. **View the Report**
   The final report will be available at `report/final_report.html`. Open this file in a web browser to view the results.

## Key Components in the Report

- **Table 1**: A summary of patient characteristics by lung cancer status, generated by `02_descriptive_analysis.R` and saved as `table1.html`.
- **Figure**: Age distribution by lung cancer status, created by `03_plot_age_distribution.R` and saved as `age_distribution.png`.
- **Logistic Regression Model**: Results for lung cancer prediction, created by `04_predictive_modeling.R` and saved as `model_summary.html`.

## Notes

- The `htmltools::includeHTML` function is used in `final_report.Rmd` to embed HTML tables in the report.
